(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{627:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(22),s=(a(221),a(28)),o=a(119),r=a(45),l=a(46),u=a(14),d=a(48),h=a(47),p=a(12),j=a(26),m=a.n(j),b=a(652),O=a(315),x=a(649),f=a(650),g=a(648),y=a(651),v=(a(179),a(177)),k=a(640),C=a(639),w=a(312),S=a(64),N=a(642),M=a(314),A=a(643),V=a(647),_=a(644),U=a(51),E=a(325);a(327);var P=function(e){var t,a,n,i;function c(e){var t=a.curData;try{t.text=e;var n=JSON.parse(e);t.format=!0,t.jsonData=n}catch(i){t.format=i.message}}function s(e){return"string"===typeof(e=e||"")?e:"object"===Object(U.a)(e)?JSON.stringify(e,null,"  "):void 0}return n=(e=e||{}).container||"mock-editor",e.wordList&&"object"===Object(U.a)(e.wordList)&&e.wordList.name&&e.wordList.mock&&[].push(e.wordList),i=e.data||"",e.readOnly=e.readOnly||!1,e.fullScreen=e.fullScreen||!1,(t=E.edit(n)).$blockScrolling=1/0,t.getSession().setMode("ace/mode/json"),!0===e.readOnly&&(t.setReadOnly(!0),t.renderer.$cursorLayer.element.style.display="none"),t.setOptions({useWorker:!0}),t._fullscreen_yapi=e.fullScreen,(a={curData:{},getValue:function(){return a.curData.text},setValue:function(e){t.setValue(s(e))},editor:t,options:e,insertCode:function(e){var a=t.selection.getCursor();t.session.insert(a,e)}}).setValue(s(i)),c(t.getValue()),t.clearSelection(),t.getSession().on("change",(function(){c(t.getValue()),"function"===typeof e.onChange&&e.onChange.call(a,a.curData),t.clearSelection()})),a},K=a(2),I={javascript:"ace/mode/javascript",json:"ace/mode/json",text:"ace/mode/text",xml:"ace/mode/xml",html:"ace/mode/html"};function W(e,t){try{return e=JSON.parse(e),t=JSON.parse(t),!m.a.isEqual(e,t)}catch(a){return!0}}function D(e){return I[e]||I.text}var T=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.editor=P({container:this.editorElement,data:this.props.data,onChange:this.props.onChange,readOnly:this.props.readOnly,fullScreen:this.props.fullScreen});var e=this.props.mode||"javascript";this.editor.editor.getSession().setMode(D(e)),"function"===typeof this.props.callback&&this.props.callback(this.editor.editor)}},{key:"componentWillReceiveProps",value:function(e){if(this.editor&&W(e.data,this.props.data)&&W(this.editor.getValue(),e.data)){this.editor.setValue(e.data);var t=e.mode||"javascript";this.editor.editor.getSession().setMode(D(t)),this.editor.editor.clearSelection()}}},{key:"render",value:function(){var e=this;return Object(K.jsx)("div",{className:this.props.className,style:this.props.className?void 0:this.props.style||{width:"100%",height:"200px"},ref:function(t){e.editorElement=t}})}}]),a}(i.a.PureComponent),q=a(313),L=a(91),J=a(641),F=a(645),R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),Object(p.a)(Object(u.a)(n),"handleChange",(function(e){var t=e.target.value;n.setState({value:t})})),Object(p.a)(Object(u.a)(n),"onKeyup",(function(e){if(13===e.keyCode&&e.target.value!==n.props.value)return n.props.onChange(e)})),Object(p.a)(Object(u.a)(n),"handleBlur",(function(e){if(e.target.value!==n.props.value)return n.props.onChange(e)})),n.state={value:e.value},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this.state.value;return Object(K.jsx)(k.a,Object(s.a)(Object(s.a)({},this.props),{},{value:e,onKeyUp:this.onKeyup,onBlur:this.handleBlur,onChange:this.handleChange}))}}]),a}(n.PureComponent),B=a(5),G=a.n(B),z="zh_CN";function H(e){z=e}var Y=function(e){try{if("object"==Object(U.a)(JSON.parse(e)))return!0}catch(t){}return!1},$=".",Q=[{name:"date-time"},{name:"date"},{name:"email"},{name:"hostname"},{name:"ipv4"},{name:"ipv6"},{name:"uri"}],X=["string","number","array","object","boolean","integer"],Z={string:{type:"string"},number:{type:"number"},array:{type:"array",items:{type:"string"}},object:{type:"object",properties:{}},boolean:{type:"boolean"},integer:{type:"integer"}};function ee(e,t){for(var a=e,n=0;n<t.length;n++)a=a[t[n]];return a}function te(e,t,a){for(var n=e,i=0;i<t.length-1;i++)n=n[t[i]];n[t[t.length-1]]=a}function ae(e,t){for(var a=e,n=0;n<t.length-1;n++)a=a[t[n]];delete a[t[t.length-1]]}function ne(e){if(1===e.length)return[];var t=[].concat(e);return t.splice(e.length-1,1),t}function ie(e,t){if("object"===e.type){var a=function(e){var t=[];return Object.keys(e).map((function(e){return t.push(e)})),t}(e.properties);t?e.required=[].concat(a):delete e.required,function(e,t){for(var a in e)"array"!==e[a].type&&"object"!==e[a].type||ie(e[a],t)}(e.properties,t)}else{if("array"!==e.type)return e;ie(e.items,t)}}function ce(e){if("object"===Object(U.a)(e)){if(Array.isArray(e)){var t=[];return e.forEach((function(e,a){t[a]=ce(e)})),t}var a={};for(var n in e)a[n]=ce(e[n]);return a}return e}var se=[{label:"\u8f93\u5165\u6846",value:"input",uiKey:"string-input",type:["string"]},{label:"\u6570\u5b57\u8f93\u5165\u6846",value:"number",uiKey:"string-number",type:["number","integer"]},{label:"\u6ed1\u52a8\u6761",value:"slider",uiKey:"string-slider",type:["number","integer"]},{label:"\u6587\u672c\u57df",value:"textarea",uiKey:"string-textarea",type:["string"]},{label:"\u989c\u8272\u9009\u62e9",value:"color",uiKey:"string-color",type:["string"]},{label:"\u65e5\u671f\u9009\u62e9",value:"date",format:"date",uiKey:"string-date",type:["string"]},{label:"\u5355\u9009\u6846",value:"radio",uiKey:"string-radio",type:["string"]},{label:"\u4e0b\u62c9\u5355\u9009",value:"select",uiKey:"string-select"},{label:"\u4e0b\u62c9\u591a\u9009",value:"multiSelect",uiKey:"string-multiSelect",type:["string"]},{label:"\u6587\u4ef6\u4e0a\u4f20",value:"upload",uiKey:"string-upload",type:["string"]},{label:"\u662f\u5426\u9009\u62e9",value:"checkbox",uiKey:"boolean-checkbox",type:["boolean"]},{label:"\u5f00\u5173",value:"switch",uiKey:"boolean-switch",type:["boolean"]},{label:"\u7ec4",value:"object",uiKey:"object",type:["object"]},{label:"\u5217\u8868",value:"array",uiKey:"array",type:["array"]}],oe=m.a.clone(se);function re(e,t){return oe.filter((function(a){return t?m.a.findIndex(a.type,(function(t){return t===e}))>-1&&a.format===t:m.a.findIndex(a.type,(function(t){return t===e}))>-1}))}function le(e,t){return re(e)&&re(e)[0]&&re(e)[0]?{uiKey:re(e,t)[0].uiKey,uiValue:re(e,t)[0].value,uiFormat:re(e,t)[0].format}:{}}function ue(e){return m.a.find(oe,{uiKey:e})}function de(e,t,a,n){var i=e;if(0===t.length)i=Object.assign(n?{}:i,a);else{for(var c=0;c<t.length-1;c++)i=i?i[t[c]]:{};i&&(i[t[t.length-1]]=a)}}function he(e){if(!e)return[];var t=e.properties,a=e.items,n=e.type;if(!t&&!a)return[];var i={};return"object"===n&&(i=t),"array"===n&&(i=a),Object.keys(i).map((function(e){return{schema:i[e],name:e}}))}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=he(e),n=a.map((function(e){var a=e.name,n=e.schema,i=n.type,c=n.enum,o=n.properties,r=n.items,l="object"===i&&o,u="array"===i&&r&&!c,d=a&&t[e.name];if(!d)return e;if(u){var h=pe(r,d.items||{});return Object(s.a)(Object(s.a)({},e),{},{schema:Object(s.a)(Object(s.a)(Object(s.a)({},e.schema),d),{},{items:h})})}if(l){var p=pe(e.schema,d);return Object(s.a)(Object(s.a)({},e),{},{schema:p})}return Object(s.a)(Object(s.a)({},e),{},{schema:Object(s.a)(Object(s.a)({},e.schema),d)})})),i={};n.forEach((function(e){i[e.name]=e.schema}));var c={};return Object.keys(t).forEach((function(e){"string"===typeof e&&"ui:"===e.substring(0,3)&&(c[e]=t[e])})),je(i)?Object(s.a)(Object(s.a)({},e),c):Object(s.a)(Object(s.a)(Object(s.a)({},e),c),{},{properties:i})}function je(e){return 0===Object.keys(e).length}var me=function e(t){var a=t.items,n={},i=Object(s.a)(Object(s.a)({},a),{},{type:a.type,uiKey:a.uiKey||"string-input"});return a["ui:widget"]&&(i["ui:widget"]=a["ui:widget"]),"object"!==a.type||m.a.isEmpty(a.properties)?"array"===a.type&&a.hasOwnProperty("items")&&!m.a.isEmpty(a.items)&&(i=Object(s.a)(Object(s.a)({},e(a)),{},{type:a.type,uiKey:["object","array"].includes(a.type)?a.type:"string-input"})):i=Object(s.a)(Object(s.a)({},be(a)),{},{type:a.type,uiKey:"object"}),n=Object.assign(n,{items:i,type:t.type,uiKey:t.uiKey||["object","array"].includes(t.type)?t.type:"string-input","ui:widget":t["ui:widget"]}),console.log("subUiData",n),n},be=function e(t){var a=t.properties,n={};for(var i in a){var c,o=a[i],r=Object(s.a)(Object(s.a)({},o),{},{type:o.type,uiKey:o.uiKey||"string-input"});o["ui:widget"]&&(r["ui:widget"]=o["ui:widget"]),"object"!==o.type||m.a.isEmpty(o.properties)?"array"===o.type&&o.hasOwnProperty("items")&&!m.a.isEmpty(o.items)&&(r=Object(s.a)(Object(s.a)({},me(o)),{},{type:o.type,uiKey:["object","array"].includes(o.type)?o.type:"string-input"})):r=Object(s.a)(Object(s.a)({},e(o)),{},{type:o.type,uiKey:"object"}),n=Object.assign(n,(c={},Object(p.a)(c,i,r),Object(p.a)(c,"type",o.type),Object(p.a)(c,"uiKey",o.uiKey||["object","array"].includes(o.type)?o.type:"string-input"),c))}return n},Oe=z,xe={en_US:{title:"Title",import_json:"Import JSON",base_setting:"Base Setting",all_setting:"Source Code",default:"Default",description:"Description",adv_setting:"Advanced Settings",add_child_node:"Add child node",add_sibling_node:"Add sibling nodes",add_node:"Add sibling/child nodes",child_node:"Child node",sibling_node:"Sibling node",ok:"OK",cancel:"Cancel",minLength:"Min length",maxLength:"Max length",pattern:"MUST be a string and SHOULD be a valid regular expression.",exclusiveMinimum:"Value strictly less than",exclusiveMaximum:"Value strictly more than",minimum:"Min",maximum:"Max",unique_items:"Unique Items",min_items:"MinItems",max_items:"MaxItems",checked_all:"Checked All",valid_json:"Not valid json",enum:"Enum",enum_name:"Enum Name",enum_msg:"One value per line",enum_desc:"desc",enum_desc_msg:"enum description",required:"required",mock:"mock",mockLink:"Help",group:"group",ui:"display",preview:"preview",import:"Import",import_json_schema:"Import jsonSchema"},zh_CN:{title:"\u6807\u9898",import_json:"\u5bfc\u5165 json",base_setting:"\u57fa\u7840\u8bbe\u7f6e",all_setting:"\u7f16\u8f91\u6e90\u7801",default:"\u9ed8\u8ba4\u503c",description:"\u5907\u6ce8",adv_setting:"\u9ad8\u7ea7\u8bbe\u7f6e",add_child_node:"\u6dfb\u52a0\u5b50\u8282\u70b9",add_sibling_node:"\u6dfb\u52a0\u5144\u5f1f\u8282\u70b9",add_node:"\u6dfb\u52a0\u5144\u5f1f/\u5b50\u8282\u70b9",child_node:"\u5b50\u8282\u70b9",sibling_node:"\u5144\u5f1f\u8282\u70b9",ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",minLength:"\u6700\u5c0f\u957f\u5ea6",maxLength:"\u6700\u5927\u957f\u5ea6",pattern:"\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u7ea6\u675f\u5b57\u7b26\u4e32",exclusiveMinimum:"\u5f00\u542f\u540e\uff0c\u6570\u636e\u5fc5\u987b\u5927\u4e8e\u6700\u5c0f\u503c",exclusiveMaximum:"\u5f00\u542f\u540e\uff0c\u6570\u636e\u5fc5\u987b\u5c0f\u4e8e\u6700\u5927\u503c",minimum:"\u6700\u5c0f\u503c",maximum:"\u6700\u5927\u503c",unique_items:"\u5f00\u542f\u540e\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u4e0d\u76f8\u540c",min_items:"\u6700\u5c0f\u5143\u7d20\u4e2a\u6570",max_items:"\u6700\u5927\u5143\u7d20\u4e2a\u6570",checked_all:"\u5168\u9009",valid_json:"\u4e0d\u662f\u5408\u6cd5\u7684json\u5b57\u7b26\u4e32",enum:"\u679a\u4e3e",enum_name:"\u679a\u4e3e\u540d\u79f0",enum_msg:"\u6bcf\u884c\u53ea\u80fd\u5199\u4e00\u4e2a\u503c",enum_desc:"\u5907\u6ce8",enum_desc_msg:"\u5907\u6ce8\u63cf\u8ff0\u4fe1\u606f",required:"\u662f\u5426\u5fc5\u987b",mock:"mock",mockLink:"\u67e5\u770b\u6587\u6863",group:"\u5206\u7ec4",ui:"\u5c55\u793a",preview:"\u9884\u89c8",import:"\u5bfc\u5165",import_json_schema:"\u5bfc\u5165 jsonSchema"}},fe=function(e){return xe[Oe][e]},ge=a(637),ye=ge.a.Option,ve=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e,n){var i;return Object(r.a)(this,a),(i=t.call(this,e)).state={mock:""},i.mock=n.Model.__jsonSchemaMock||[],i}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.schema,a=this.mock.map((function(e){return Object(K.jsx)(ye,{children:e.mock},e.mock)}));return Object(K.jsx)("div",{children:Object(K.jsx)(ge.a,{className:"certain-category-search",dropdownMatchSelectWidth:!1,dataSource:a,placeholder:fe("mock"),optionLabelProp:"value",filterOption:!0,value:t.mock?t.mock.mock:"",onChange:this.props.onChange,disabled:"object"===t.type||"array"===t.type,children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(t){t.stopPropagation(),e.props.showEdit()}})})})})}}]),a}(i.a.Component);ve.contextTypes={Model:G.a.object};var ke=v.a.Option,Ce=function(e,t,a,n,i,c){var s=ce(c);switch(console.log("newUiPrefixMap",s),t.type){case"array":if(Array.isArray(e)&&e.length>1&&Array.isArray(s)){var o=e[e.length-1];s.push({key:o,type:t.type})}return Object(K.jsx)(we,{prefix:e,data:t,showEdit:a,showAdv:n,uiSchema:i,uiPrefixMap:s});case"object":if(Array.isArray(e)&&e.length>1&&Array.isArray(s)){var r=e[e.length-1];s.push({key:r,type:t.type})}var l=[].concat(e,"properties");return Object(K.jsx)(Me,{prefix:l,data:t,showEdit:a,showAdv:n,uiSchema:i,uiPrefixMap:s});default:return null}},we=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e,n){var i;return Object(r.a)(this,a),i=t.call(this,e),Object(p.a)(Object(u.a)(i),"handleChangeType",(function(e){var t=i.getPrefix(),a=[].concat(t,"type");i.Model.changeTypeAction({key:a,value:e});var n=i.getUiPrefix(),c=le(e),s=c.uiKey,o=c.uiValue;i.UiModel.changeUiAction({prefix:n,uiKey:s,value:o,type:e})})),Object(p.a)(Object(u.a)(i),"handleChangeDesc",(function(e){var t=i.getPrefix(),a=[].concat(t,"description"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleChangeMock",(function(e){var t=i.getPrefix(),a=[].concat(t,"mock"),n=e?{mock:e}:"";i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleChangeTitle",(function(e){var t=i.getPrefix(),a=[].concat(t,"title"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleAddChildField",(function(){var e=i.getPrefix(),t=[].concat(e,"properties");i.Model.addChildFieldAction({key:t}),i.Model.setOpenValueAction({key:t,value:!0});var a=i.getUiPrefix();i.UiModel.addFieldUiAction({uiPrefixMap:a})})),Object(p.a)(Object(u.a)(i),"handleClickIcon",(function(){var e=i.getPrefix(),t=[].concat(e,"properties");i.Model.setOpenValueAction({key:t})})),Object(p.a)(Object(u.a)(i),"handleShowEdit",(function(e,t){var a=i.getPrefix();i.props.showEdit(a,e,i.props.data.items[e],t)})),Object(p.a)(Object(u.a)(i),"handleShowAdv",(function(){i.props.showAdv(i.getPrefix(),i.props.data.items)})),Object(p.a)(Object(u.a)(i),"handleChangeUiWidget",(function(e){var t=i.getUiPrefix(),a=le(e),n=a.uiKey,c=a.uiValue;i.UiModel.changeUiAction({prefix:t,key:"items",uiKey:n,value:c,type:i.props.data.type})})),Object(p.a)(Object(u.a)(i),"handleChangeGroup",(function(e){var t=i.getPrefix(),a=[].concat(t,"group"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),i._tagPaddingLeftStyle={},i.Model=n.Model.schema,i.UiModel=n.Model.uiSchema,i}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.prefix.filter((function(e){return"properties"!==e})).length;this.__tagPaddingLeftStyle={paddingLeft:"".concat(20*(e+1),"px")}}},{key:"getPrefix",value:function(){return[].concat(this.props.prefix,"items")}},{key:"getUiPrefix",value:function(){return[].concat(this.props.uiPrefixMap,{key:"items",type:"string"})}},{key:"render",value:function(){var e=this;console.log("xxxx",this.context);var t=this.props,a=t.data,n=t.prefix,i=t.showEdit,c=t.showAdv,s=t.uiSchema,o=t.uiPrefixMap,r=a.items,l=[].concat(n,"items"),u=[].concat(l,"properties").join($),d=this.context.getOpenValue([u]),h="",p=ce(s),j=this.getUiPrefix();return j.forEach((function(e,t){p=m.a.get(p,"".concat(m.a.get(e,"key")))||{},t===j.length-1&&(h=p&&p.uiKey)})),!m.a.isUndefined(a.items)&&Object(K.jsxs)("div",{className:"array-type",children:[Object(K.jsxs)(A.a,{className:"array-item-type",type:"flex",justify:"space-around",align:"middle",children:[Object(K.jsx)(V.a,{span:this.context.columnWidths.name,className:"col-item name-item col-item-name",style:this.__tagPaddingLeftStyle,children:Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",children:[Object(K.jsx)(V.a,{span:2,className:"down-style-col",children:"object"===r.type?Object(K.jsx)("span",{className:"down-style",onClick:this.handleClickIcon,children:d?Object(K.jsx)(x.a,{className:"icon-object"}):Object(K.jsx)(f.a,{className:"icon-object"})}):null}),Object(K.jsx)(V.a,{span:22,children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(_.a,{disabled:!0}),disabled:!0,value:"Items"})})]})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.type,className:"col-item col-item-type",children:Object(K.jsx)(v.a,{name:"itemtype",className:"type-select-style",onChange:this.handleChangeType,value:r.type,children:X.map((function(e,t){return Object(K.jsx)(ke,{value:e,children:e},t)}))})}),this.context.isMock&&Object(K.jsx)(V.a,{span:this.context.columnWidths.mock,className:"col-item col-item-mock",children:Object(K.jsx)(ve,{schema:r,showEdit:function(){return e.handleShowEdit("mock",r.type)},onChange:this.handleChangeMock})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.title,className:"col-item col-item-mock",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.handleShowEdit("title")}}),placeholder:fe("title"),value:r.title,onChange:this.handleChangeTitle})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.desc,className:"col-item col-item-desc",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.handleShowEdit("description")}}),placeholder:fe("description"),value:r.description,onChange:this.handleChangeDesc})}),this.context.showGroup&&Object(K.jsx)(V.a,{span:this.context.columnWidths.group,className:"col-item col-item-group",children:Object(K.jsx)(k.a,{placeholder:fe("group"),value:r.group,onChange:this.handleChangeGroup})}),this.context.showUiSelect&&Object(K.jsx)(V.a,{span:this.context.columnWidths.ui,className:"col-item col-item-ui",children:Object(K.jsx)(v.a,{className:"type-select-style",onChange:this.handleChangeUiWidget,value:h,children:re(r.type,r.format).map((function(e,t){return Object(K.jsx)(ke,{value:e.uiKey,children:e.label},t)}))})}),Object(K.jsxs)(V.a,{span:2,className:"col-item col-item-setting",children:[Object(K.jsx)("span",{className:"adv-set",onClick:this.handleShowAdv,children:Object(K.jsx)(M.a,{placement:"top",title:fe("adv_setting"),children:Object(K.jsx)(y.a,{})})}),"object"===r.type?Object(K.jsx)("span",{onClick:function(){return e.handleAddChildField(r)},children:Object(K.jsx)(M.a,{placement:"top",title:fe("add_child_node"),children:Object(K.jsx)(O.a,{className:"plus"})})}):null]})]}),Object(K.jsx)("div",{className:"option-formStyle",children:Ce(l,r,i,c,s,o)})]})}}]),a}(n.PureComponent);we.contextTypes={getOpenValue:G.a.func,Model:G.a.object,UiModel:G.a.object,isMock:G.a.bool,showGroup:G.a.bool,showUiSelect:G.a.bool,columnWidths:G.a.object};var Se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e,n){var i;return Object(r.a)(this,a),i=t.call(this,e),Object(p.a)(Object(u.a)(i),"handleChangeName",(function(e){var t=i.props,a=t.data,n=t.prefix,c=t.name,s=e.target.value;if(a.properties[s]&&"object"===Object(U.a)(a.properties[s]))return w.b.error('The field "'.concat(s,'" already exists.'));i.Model.changeNameAction({value:s,prefix:n,name:c})})),Object(p.a)(Object(u.a)(i),"handleChangeDesc",(function(e){var t=i.getPrefix(),a=[].concat(t,"description"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleChangeMock",(function(e){var t=i.getPrefix(),a=[].concat(t,"mock"),n=e?{mock:e}:"";i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleChangeTitle",(function(e){var t=i.getPrefix(),a=[].concat(t,"title"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),Object(p.a)(Object(u.a)(i),"handleChangeType",(function(e){var t=i.getPrefix(),a=[].concat(t,"type");i.Model.changeTypeAction({key:a,value:e});var n=i.getUiPrefix(),c=le(e),s=c.uiKey,o=c.uiValue;i.UiModel.changeUiAction({prefix:n,uiKey:s,value:o,type:e})})),Object(p.a)(Object(u.a)(i),"handleDeleteItem",(function(){var e=i.props,t=e.prefix,a=e.name,n=i.getPrefix();i.Model.deleteItemAction({key:n}),i.Model.enableRequireAction({prefix:t,name:a,required:!1});var c=i.getUiPrefix();i.UiModel.deleteItemUiAction({prefix:c})})),Object(p.a)(Object(u.a)(i),"handleShowEdit",(function(e,t){var a=i.props,n=a.data,c=a.name;(0,a.showEdit)(i.getPrefix(),e,n.properties[c][e],t)})),Object(p.a)(Object(u.a)(i),"handleShowAdv",(function(){var e=i.props,t=e.data,a=e.name;(0,e.showAdv)(i.getPrefix(),t.properties[a])})),Object(p.a)(Object(u.a)(i),"handleAddField",(function(){var e=i.props,t=e.prefix,a=e.name,n=e.uiPrefixMap;i.Model.addFieldAction({prefix:t,name:a}),i.UiModel.addFieldUiAction({uiPrefixMap:n,name:a})})),Object(p.a)(Object(u.a)(i),"handleClickIcon",(function(){var e=i.getPrefix(),t=[].concat(e,"properties");i.Model.setOpenValueAction({key:t})})),Object(p.a)(Object(u.a)(i),"handleEnableRequire",(function(e){var t=i.props,a=t.prefix,n=t.name,c=e.target.checked;i.Model.enableRequireAction({prefix:a,name:n,required:c})})),Object(p.a)(Object(u.a)(i),"handleChangeUiWidget",(function(e,t){var a=i.getUiPrefix(),n=ue(e);i.UiModel.changeUiAction({prefix:a,uiKey:e,value:m.a.get(n,"value"),type:t})})),Object(p.a)(Object(u.a)(i),"handleChangeGroup",(function(e){var t=i.getPrefix(),a=[].concat(t,"group"),n=e.target.value;i.Model.changeValueAction({key:a,value:n})})),i._tagPaddingLeftStyle={},i.Model=n.Model.schema,i.UiModel=n.Model.uiSchema,i}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.prefix.filter((function(e){return"properties"!==e})).length;this.__tagPaddingLeftStyle={paddingLeft:"".concat(20*(e+1),"px")}}},{key:"getPrefix",value:function(){return[].concat(this.props.prefix,this.props.name)}},{key:"getUiPrefix",value:function(){var e=this.props,t=e.name,a=e.data;return[].concat(this.props.uiPrefixMap,{key:t,type:a.type})}},{key:"render",value:function(){var e=this;console.log("dddd-xxxx",this.context);var t=this.props,a=t.name,n=t.data,i=t.prefix,c=t.showEdit,s=t.showAdv,o=t.uiSchema,r=t.uiPrefixMap,l=n.properties[a],u=[].concat(i,a),d=[].concat(r,[{key:a,type:"string"}]),h=i.join($),p=[].concat(u,"properties").join($),j=this.context.getOpenValue([h]),b=this.context.getOpenValue([p]),C=ce(o),w="";return d.forEach((function(e,t){C=m.a.get(C,e.key),t===d.length-1&&(w=m.a.get(C,"uiKey"))})),j?Object(K.jsxs)("div",{children:[Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",children:[Object(K.jsx)(V.a,{span:this.context.columnWidths.name,className:"col-item name-item col-item-name",style:this.__tagPaddingLeftStyle,children:Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",children:[Object(K.jsx)(V.a,{span:2,className:"down-style-col",children:"object"===l.type?Object(K.jsx)("span",{className:"down-style",onClick:this.handleClickIcon,children:b?Object(K.jsx)(x.a,{className:"icon-object"}):Object(K.jsx)(f.a,{className:"icon-object"})}):null}),Object(K.jsx)(V.a,{span:22,children:Object(K.jsx)(R,{addonAfter:Object(K.jsx)(M.a,{placement:"top",title:fe("required"),children:Object(K.jsx)(_.a,{onChange:this.handleEnableRequire,checked:!m.a.isUndefined(n.required)&&-1!==n.required.indexOf(a)})}),onChange:this.handleChangeName,value:a})})]})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.type,className:"col-item col-item-type",children:Object(K.jsx)(v.a,{className:"type-select-style",onChange:this.handleChangeType,value:l.type,children:X.map((function(e,t){return Object(K.jsx)(ke,{value:e,children:e},t)}))})}),this.context.isMock&&Object(K.jsx)(V.a,{span:this.context.columnWidths.mock,className:"col-item col-item-mock",children:Object(K.jsx)(ve,{schema:l,showEdit:function(){return e.handleShowEdit("mock",l.type)},onChange:this.handleChangeMock})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.title,className:"col-item col-item-mock",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.handleShowEdit("title")}}),placeholder:fe("title"),value:l.title,onChange:this.handleChangeTitle})}),Object(K.jsx)(V.a,{span:this.context.columnWidths.desc,className:"col-item col-item-desc",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.handleShowEdit("description")}}),placeholder:fe("description"),value:l.description,onChange:this.handleChangeDesc})}),this.context.showGroup&&Object(K.jsx)(V.a,{span:this.context.columnWidths.group,className:"col-item col-item-group",children:Object(K.jsx)(k.a,{placeholder:fe("group"),value:l.group,onChange:this.handleChangeGroup})}),this.context.showUiSelect&&Object(K.jsx)(V.a,{span:this.context.columnWidths.ui,className:"col-item col-item-ui",children:Object(K.jsx)(v.a,{className:"type-select-style",onChange:function(t){return e.handleChangeUiWidget(t,l.type)},value:w,children:re(l.type,l.format).map((function(e,t){return Object(K.jsx)(ke,{value:e.uiKey,children:e.label},t)}))})}),Object(K.jsxs)(V.a,{span:2,className:"col-item col-item-setting",children:[Object(K.jsx)("span",{className:"adv-set",onClick:this.handleShowAdv,children:Object(K.jsx)(M.a,{placement:"top",title:fe("adv_setting"),children:Object(K.jsx)(y.a,{})})}),Object(K.jsx)("span",{className:"delete-item",onClick:this.handleDeleteItem,children:Object(K.jsx)(L.a,{className:"close"})}),"object"===l.type?Object(K.jsx)(Ae,{prefix:i,name:a,uiPrefixMap:r}):Object(K.jsx)("span",{onClick:this.handleAddField,children:Object(K.jsx)(M.a,{placement:"top",title:fe("add_sibling_node"),children:Object(K.jsx)(O.a,{className:"plus"})})})]})]}),Object(K.jsx)("div",{className:"option-formStyle",children:Ce(u,l,c,s,o,r)})]}):null}}]),a}(n.PureComponent);Se.contextTypes={getOpenValue:G.a.func,Model:G.a.object,UiModel:G.a.object,isMock:G.a.bool,showGroup:G.a.bool,showUiSelect:G.a.bool,columnWidths:G.a.object};var Ne=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"shouldComponentUpdate",value:function(e){return!(m.a.isEqual(e.data,this.props.data)&&m.a.isEqual(e.prefix,this.props.prefix)&&m.a.isEqual(e.open,this.props.open)&&m.a.isEqual(e.uiSchema,this.props.uiSchema)&&m.a.isEqual(e.uiPrefixMap,this.props.uiPrefixMap))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.prefix,i=t.showEdit,c=t.showAdv,s=t.uiSchema,o=t.uiPrefixMap;return Object(K.jsx)("div",{className:"object-style",children:Object.keys(a.properties).map((function(t,a){return Object(K.jsx)(Se,{data:e.props.data,name:t,prefix:n,showEdit:i,showAdv:c,uiSchema:s,uiPrefixMap:o},a)}))})}}]),a}(n.Component),Me=Object(o.b)((function(e){return{open:e.schema.open}}))(Ne),Ae=function(e,t){var a=e.prefix,n=e.name,i=e.uiPrefixMap,c=t.Model.schema,s=t.Model.uiSchema,o=Object(K.jsxs)(J.a,{children:[Object(K.jsx)(J.a.Item,{children:Object(K.jsx)("span",{onClick:function(){c.addFieldAction({prefix:a,name:n}),s.addFieldUiAction({uiPrefixMap:i})},children:fe("sibling_node")})}),Object(K.jsx)(J.a.Item,{children:Object(K.jsx)("span",{onClick:function(){c.setOpenValueAction({key:[].concat(a,n,"properties"),value:!0}),c.addChildFieldAction({key:[].concat(a,n,"properties")}),s.addChildFieldUiAction({uiPrefixMap:[].concat(Object(q.a)(i),[{key:n,type:"string"}])})},children:fe("child_node")})})]});return Object(K.jsx)(M.a,{placement:"top",title:fe("add_node"),children:Object(K.jsx)(F.a,{overlay:o,children:Object(K.jsx)(O.a,{className:"plus"})})})};Ae.contextTypes={Model:G.a.object,UiModel:G.a.object};var Ve=function(e){var t=Ce([],e.data,e.showEdit,e.showAdv,e.uiSchema,[]);return Object(K.jsx)("div",{className:"schema-content",children:t})};function _e(e){!e.type&&e.properties&&"object"===Object(U.a)(e.properties)&&(e.type="object")}function Ue(e){if(!e||e.type||e.properties||(e.type="string"),_e(e),"object"===e.type)e.properties||(e.properties={}),function(e){for(var t in e)_e(e[t]),"array"!==e[t].type&&"object"!==e[t].type||Ue(e[t])}(e.properties);else{if("array"!==e.type)return e;e.items||(e.items={type:"string"}),Ue(e.items)}}var Ee=Ue,Pe=a(646),Ke=a(638),Ie=v.a.Option,We=k.a.TextArea,De=function(e,t,a,n){["integer","number"].includes(a.type)&&"default"===t&&!isNaN(e)&&(e=Number(e)),a[t]=e,n(a)},Te=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e,n){var i;return Object(r.a)(this,a),i=t.call(this,e),Object(p.a)(Object(u.a)(i),"changeOtherValue",(function(e,t,a){a[t]=e,i.context.changeCustomValue(a)})),Object(p.a)(Object(u.a)(i),"changeEnumOtherValue",(function(e,t){var a=e.split("\n");0===a.length||1===a.length&&!a[0]?(delete t.enum,i.context.changeCustomValue(t)):(t.enum=a,i.context.changeCustomValue(t))})),Object(p.a)(Object(u.a)(i),"changeEnumOtherName",(function(e,t){var a=e.split("\n");0===a.length||1===a.length&&!a[0]?(delete t.enumNames,i.context.changeCustomValue(t)):(t.enumNames=a,i.context.changeCustomValue(t))})),Object(p.a)(Object(u.a)(i),"changeEnumDescOtherValue",(function(e,t){t.enumDesc=e,i.context.changeCustomValue(t)})),Object(p.a)(Object(u.a)(i),"onChangeCheckBox",(function(e,t){i.setState({checked:e}),e||(delete t.enum,i.context.changeCustomValue(t))})),i.state={checked:!m.a.isUndefined(e.data.enum)},i.format=n.Model.__jsonSchemaFormat,i}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.data.enum!==e.data.enum&&this.setState({checked:!m.a.isUndefined(e.data.enum)})}},{key:"render",value:function(){var e=this,t=this.props.data;return console.log("data",t),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"default-setting",children:fe("base_setting")}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:4,className:"other-label",children:[fe("default"),"\uff1a"]}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(k.a,{value:t.default,placeholder:fe("default"),onChange:function(a){return e.changeOtherValue(a.target.value,"default",t)}})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:8,className:"other-label",children:[fe("minLength"),"\uff1a"]}),Object(K.jsx)(V.a,{span:16,children:Object(K.jsx)(Pe.a,{value:t.minLength,placeholder:"min.length",onChange:function(a){return e.changeOtherValue(a,"minLength",t)}})})]})}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:8,className:"other-label",children:[fe("maxLength"),"\uff1a"]}),Object(K.jsx)(V.a,{span:16,children:Object(K.jsx)(Pe.a,{value:t.maxLength,placeholder:"max.length",onChange:function(a){return e.changeOtherValue(a,"maxLength",t)}})})]})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsxs)("span",{children:["Pattern\xa0",Object(K.jsx)(M.a,{title:fe("pattern"),children:Object(K.jsx)(b.a,{style:{width:"10px"}})}),"\xa0 :"]})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(k.a,{value:t.pattern,placeholder:"Pattern",onChange:function(a){return e.changeOtherValue(a.target.value,"pattern",t)}})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsxs)("span",{children:[fe("enum"),Object(K.jsx)(_.a,{checked:this.state.checked,onChange:function(a){return e.onChangeCheckBox(a.target.checked,t)}})," ",":"]})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(We,{value:t.enum&&t.enum.length&&t.enum.join("\n"),disabled:!this.state.checked,placeholder:fe("enum_msg"),autosize:{minRows:2,maxRows:6},onChange:function(a){e.changeEnumOtherValue(a.target.value,t)}})})]}),this.state.checked&&Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsx)("span",{children:fe("enum_name")})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(We,{value:t.enumNames&&t.enumNames.length&&t.enumNames.join("\n"),disabled:!this.state.checked,placeholder:fe("enum_msg"),autosize:{minRows:2,maxRows:6},onChange:function(a){e.changeEnumOtherName(a.target.value,t)}})})]}),this.state.checked&&Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsx)("span",{children:fe("enum_desc")})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(We,{value:t.enumDesc,disabled:!this.state.checked,placeholder:fe("enum_desc_msg"),autosize:{minRows:2,maxRows:6},onChange:function(a){e.changeEnumDescOtherValue(a.target.value,t)}})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsx)("span",{children:"format :"})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(v.a,{showSearch:!0,style:{width:150},value:t.format,dropdownClassName:"json-schema-react-editor-adv-modal-select",placeholder:"Select a format",optionFilterProp:"children",optionLabelProp:"value",onChange:function(a){return e.changeOtherValue(a,"format",t)},filterOption:function(e,t){return t.props.value.toLowerCase().indexOf(e.toLowerCase())>=0},children:this.format.map((function(e){return Object(K.jsxs)(Ie,{value:e.name,children:[e.name," ",Object(K.jsx)("span",{className:"format-items-title",children:e.title})]},e.name)}))})})]})]})}}]),a}(n.PureComponent);Te.contextTypes={changeCustomValue:G.a.func,Model:G.a.object};var qe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),Object(p.a)(Object(u.a)(n),"onChangeCheckBox",(function(e,t){n.setState({checked:e}),e||(delete t.enum,delete t.enumNames,n.setState({enum:"",enumNames:""}),n.context.changeCustomValue(t))})),Object(p.a)(Object(u.a)(n),"changeEnumOtherValue",(function(e,t){n.setState({enum:e});var a=e.split("\n");0===a.length||1===a.length&&!a[0]?(delete t.enum,n.context.changeCustomValue(t)):(t.enum=a.map((function(e){return+e})),n.context.changeCustomValue(t))})),Object(p.a)(Object(u.a)(n),"onEnterEnumOtherValue",(function(e,t){var a=e.split("\n").map((function(e){return+e}));t.enum=a,n.context.changeCustomValue(t)})),Object(p.a)(Object(u.a)(n),"changeEnumDescOtherValue",(function(e,t){n.setState({enumNames:e});var a=e.split("\n");0===a.length||1===a.length&&!a[0]?(delete t.enumNames,n.context.changeCustomValue(t)):(t.enumNames=a.map((function(e){return+e})),n.context.changeCustomValue(t))})),n.state={checked:!m.a.isUndefined(e.data.enum),enum:m.a.isUndefined(e.data.enum)?"":e.data.enum.join("\n"),enumNames:m.a.isUndefined(e.data.enumNames)?"":e.data.enumNames.join("\n")},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=m.a.isUndefined(this.props.data.enum)?"":this.props.data.enum.join("\n"),a=m.a.isUndefined(e.data.enum)?"":e.data.enum.join("\n");t!==a&&this.setState({enum:a});var n=m.a.isUndefined(this.props.data.enumNames)?"":this.props.data.enumNames.join("\n"),i=m.a.isUndefined(e.data.enumNames)?"":e.data.enumNames.join("\n");n!==i&&this.setState({enumNames:i})}},{key:"render",value:function(){var e=this,t=this.props.data;return Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"default-setting",children:fe("base_setting")}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:4,className:"other-label",children:[fe("default"),"\uff1a"]}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(Pe.a,{value:t.default,placeholder:fe("default"),onChange:function(a){return De(a,"default",t,e.context.changeCustomValue)}})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:13,className:"other-label",children:Object(K.jsxs)("span",{children:["exclusiveMinimum\xa0",Object(K.jsx)(M.a,{title:fe("exclusiveMinimum"),children:Object(K.jsx)(b.a,{style:{width:"10px"}})}),"\xa0 :"]})}),Object(K.jsx)(V.a,{span:11,children:Object(K.jsx)(Ke.a,{checked:t.exclusiveMinimum,placeholder:"exclusiveMinimum",onChange:function(a){return De(a,"exclusiveMinimum",t,e.context.changeCustomValue)}})})]})}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:13,className:"other-label",children:Object(K.jsxs)("span",{children:["exclusiveMaximum\xa0",Object(K.jsx)(M.a,{title:fe("exclusiveMaximum"),children:Object(K.jsx)(b.a,{style:{width:"10px"}})}),"\xa0 :"]})}),Object(K.jsx)(V.a,{span:11,children:Object(K.jsx)(Ke.a,{checked:t.exclusiveMaximum,placeholder:"exclusiveMaximum",onChange:function(a){return De(a,"exclusiveMaximum",t,e.context.changeCustomValue)}})})]})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:8,className:"other-label",children:[fe("minimum"),"\uff1a"]}),Object(K.jsx)(V.a,{span:16,children:Object(K.jsx)(Pe.a,{value:t.minimum,placeholder:fe("minimum"),onChange:function(a){return De(a,"minimum",t,e.context.changeCustomValue)}})})]})}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:8,className:"other-label",children:[fe("maximum"),"\uff1a"]}),Object(K.jsx)(V.a,{span:16,children:Object(K.jsx)(Pe.a,{value:t.maximum,placeholder:fe("maximum"),onChange:function(a){return De(a,"maximum",t,e.context.changeCustomValue)}})})]})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsxs)("span",{children:[fe("enum"),Object(K.jsx)(_.a,{checked:this.state.checked,onChange:function(a){return e.onChangeCheckBox(a.target.checked,t)}})," ",":"]})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(We,{value:this.state.enum,disabled:!this.state.checked,placeholder:fe("enum_msg"),autosize:{minRows:2,maxRows:6},onChange:function(a){e.changeEnumOtherValue(a.target.value,t)}})})]}),this.state.checked&&Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:4,className:"other-label",children:Object(K.jsxs)("span",{children:[fe("enum_desc")," \uff1a"]})}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsx)(We,{value:this.state.enumNames,disabled:!this.state.checked,placeholder:fe("enum_desc_msg"),autosize:{minRows:2,maxRows:6},onChange:function(a){e.changeEnumDescOtherValue(a.target.value,t)}})})]})]})}}]),a}(n.PureComponent);qe.contextTypes={changeCustomValue:G.a.func};var Le=function(e,t){var a=e.data,n=m.a.isUndefined(a.default)?"":a.default?"true":"false";return Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"default-setting",children:fe("base_setting")}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:4,className:"other-label",children:[fe("default"),"\uff1a"]}),Object(K.jsx)(V.a,{span:20,children:Object(K.jsxs)(v.a,{value:n,onChange:function(e){return De("true"===e,"default",a,t.changeCustomValue)},style:{width:200},children:[Object(K.jsx)(Ie,{value:"true",children:"true"}),Object(K.jsx)(Ie,{value:"false",children:"false"})]})})]})]})};Le.contextTypes={changeCustomValue:G.a.func};var Je=function(e,t){var a=e.data;return Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"default-setting",children:fe("base_setting")}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:6,className:"other-label",children:Object(K.jsxs)("span",{children:["uniqueItems\xa0",Object(K.jsx)(M.a,{title:fe("unique_items"),children:Object(K.jsx)(b.a,{style:{width:"10px"}})}),"\xa0 :"]})}),Object(K.jsx)(V.a,{span:18,children:Object(K.jsx)(Ke.a,{checked:a.uniqueItems,placeholder:"uniqueItems",onChange:function(e){return De(e,"uniqueItems",a,t.changeCustomValue)}})})]}),Object(K.jsxs)(A.a,{className:"other-row",type:"flex",align:"middle",children:[Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:12,className:"other-label",children:[fe("min_items"),"\uff1a"]}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsx)(Pe.a,{value:a.minItems,placeholder:"minItems",onChange:function(e){return De(e,"minItems",a,t.changeCustomValue)}})})]})}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsxs)(A.a,{type:"flex",align:"middle",children:[Object(K.jsxs)(V.a,{span:12,className:"other-label",children:[fe("max_items"),"\uff1a"]}),Object(K.jsx)(V.a,{span:12,children:Object(K.jsx)(Pe.a,{value:a.maxItems,placeholder:"maxItems",onChange:function(e){return De(e,"maxItems",a,t.changeCustomValue)}})})]})})]})]})};Je.contextTypes={changeCustomValue:G.a.func};var Fe=function(e,t){var a=e.data,n=function(e){return{string:Object(K.jsx)(Te,{data:e}),number:Object(K.jsx)(qe,{data:e}),boolean:Object(K.jsx)(Le,{data:e}),integer:Object(K.jsx)(qe,{data:e}),array:Object(K.jsx)(Je,{data:e})}[e.type]}(JSON.parse(a));return Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:n}),Object(K.jsx)("div",{className:"default-setting",children:fe("all_setting")}),Object(K.jsx)(T,{data:a,mode:"json",onChange:function(e){return function(e,t){e.text&&t(e.jsonData)}(e,t.changeCustomValue)}})]})};Fe.contextTypes={changeCustomValue:G.a.func};var Re=Fe,Be=a(220),Ge=a(299),ze=a.n(Ge),He=a(305),Ye=a.n(He);var $e=function(e){var t=e.schema,a=e.uiSchema,i=e.widgets,c=Object(n.useState)({}),s=Object(Be.a)(c,2),o=s[0],r=s[1],l=Object(n.useState)([]),u=Object(Be.a)(l,2),d=u[0],h=u[1];return console.log("valid",d),console.log("SchemaRenderForm",i),Object(K.jsxs)("div",{style:{maxWidth:600},children:[Object(K.jsx)(ze.a,{schema:t,uiSchema:a,formData:o,onChange:r,onValidate:h,displayType:"row",showDescIcon:!0,widgets:i}),Object(K.jsx)("button",{onClick:function(){var e=pe(Y(t)?JSON.parse(t):t,Y(a)?JSON.parse(a):a);Ye()(JSON.stringify(e)),w.b.success("\u590d\u5236\u6210\u529f")},children:"\u590d\u5236"})]})},Qe=a(621),Xe=v.a.Option,Ze=k.a.TextArea,et=C.a.TabPane,tt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(r.a)(this,a),n=t.call(this,e),Object(p.a)(Object(u.a)(n),"getColumnWidths",(function(){var e=n.props,t=5-(e.isMock?0:1)-(e.showGroup?0:1)-(e.showUiSelect?0:1),a=Math.floor(11/t);return{name:6,type:3,mock:a,title:a+1,desc:a+1,group:a,ui:a,setting:3}})),Object(p.a)(Object(u.a)(n),"showModal",(function(){n.setState({visible:!0})})),Object(p.a)(Object(u.a)(n),"handleOk",(function(){if("schema"!==n.importJsonType){if(!n.jsonData)return w.b.error("json \u6570\u636e\u683c\u5f0f\u6709\u8bef");var e=Qe(n.jsonData);n.Model.changeEditorSchemaAction({value:e})}else{if(!n.jsonSchemaData)return w.b.error("json \u6570\u636e\u683c\u5f0f\u6709\u8bef");n.Model.changeEditorSchemaAction({value:n.jsonSchemaData})}n.setState({visible:!1})})),Object(p.a)(Object(u.a)(n),"handleCancel",(function(){n.setState({visible:!1})})),Object(p.a)(Object(u.a)(n),"showPreviewModal",(function(){n.setState({previewVisible:!0})})),Object(p.a)(Object(u.a)(n),"cancelPreviewModal",(function(){n.setState({previewVisible:!1})})),Object(p.a)(Object(u.a)(n),"alterMsg",(function(){})),Object(p.a)(Object(u.a)(n),"handleParams",(function(e){if(e.text){if(!0!==e.format)return n.alterMsg();Ee(e.jsonData),n.Model.changeEditorSchemaAction({value:e.jsonData})}})),Object(p.a)(Object(u.a)(n),"changeType",(function(e,t){n.Model.changeTypeAction({key:[e],value:t});var a=le(t),i=a.uiKey,c=a.uiValue;n.UiModel.changeUiAction({prefix:[],uiKey:i,value:c,type:t})})),Object(p.a)(Object(u.a)(n),"handleImportJson",(function(e){if(!e.text||!0!==e.format)return n.jsonData=null;n.jsonData=e.jsonData})),Object(p.a)(Object(u.a)(n),"handleImportJsonSchema",(function(e){if(!e.text||!0!==e.format)return n.jsonSchemaData=null;n.jsonSchemaData=e.jsonData})),Object(p.a)(Object(u.a)(n),"showUiModal",(function(){n.setState({importUiSchemaVisible:!0})})),Object(p.a)(Object(u.a)(n),"cancelUiModal",(function(){n.setState({importUiSchemaVisible:!1})})),Object(p.a)(Object(u.a)(n),"handleImportUiSchema",(function(e){if(!e.text||!0!==e.format)return n.jsonUiSchemaData=null;n.jsonUiSchemaData=e.jsonData})),Object(p.a)(Object(u.a)(n),"handleUiSchemaOk",(function(){var e=function(e){var t={};return e?("object"===e.type&&e.hasOwnProperty("properties")&&!m.a.isEmpty(e.properties)?t=Object(s.a)({},be(e)):"array"===e.type&&e.hasOwnProperty("items")&&!m.a.isEmpty(e.items)&&(t=me(e)),console.log("xxxx",t),t):t}(n.uiSchemaData);n.UiModel.changeEditorUiSchemaAction({value:e,isInit:!0})})),Object(p.a)(Object(u.a)(n),"addChildField",(function(e){n.Model.addChildFieldAction({key:[e]}),n.UiModel.addChildFieldUiAction({uiPrefixMap:[]}),n.setState({show:!0})})),Object(p.a)(Object(u.a)(n),"clickIcon",(function(){n.setState({show:!n.state.show})})),Object(p.a)(Object(u.a)(n),"changeValue",(function(e,t){"mock"===e[0]&&(t=t?{mock:t}:""),n.Model.changeValueAction({key:e,value:t})})),Object(p.a)(Object(u.a)(n),"changeUiWidget",(function(e,t){var a=ue(t);n.UiModel.changeUiAction({prefix:[],type:n.props.schema.type,uiKey:t,value:m.a.get(a,"value")})})),Object(p.a)(Object(u.a)(n),"handleEditOk",(function(e){n.setState({editVisible:!1});var t=n.state[e];"mock"===e&&(t=t?{mock:t}:""),n.Model.changeValueAction({key:n.state.descriptionKey,value:t})})),Object(p.a)(Object(u.a)(n),"handleEditCancel",(function(){n.setState({editVisible:!1})})),Object(p.a)(Object(u.a)(n),"showEdit",(function(e,t,a,i){var c;if("object"!==i&&"array"!==i){var s=[].concat(e,t);a="mock"===t?a?a.mock:"":a,n.setState((c={editVisible:!0},Object(p.a)(c,t,a),Object(p.a)(c,"descriptionKey",s),Object(p.a)(c,"editorModalName",t),c))}})),Object(p.a)(Object(u.a)(n),"changeDesc",(function(e,t){n.setState(Object(p.a)({},t,e))})),Object(p.a)(Object(u.a)(n),"handleAdvOk",(function(){0===n.state.itemKey.length?(n.Model.changeEditorSchemaAction({value:n.state.curItemCustomValue}),n.UiModel.changeEditorUiSchemaAction({value:n.state.curItemCustomValue})):(n.Model.changeValueAction({key:n.state.itemKey,value:n.state.curItemCustomValue}),n.UiModel.changeUiValueAction({key:n.state.uiItemKey,value:n.state.curItemCustomValue})),n.setState({advVisible:!1})})),Object(p.a)(Object(u.a)(n),"handleAdvCancel",(function(){n.setState({advVisible:!1})})),Object(p.a)(Object(u.a)(n),"showAdv",(function(e,t){n.setState({advVisible:!0,itemKey:e,curItemCustomValue:t})})),Object(p.a)(Object(u.a)(n),"setCurUiItem",(function(e,t){n.setState({uiItemKey:e})})),Object(p.a)(Object(u.a)(n),"changeCustomValue",(function(e){n.setState({curItemCustomValue:e})})),Object(p.a)(Object(u.a)(n),"changeCustomName",(function(e){n.setState({curItemCustomValue:e})})),Object(p.a)(Object(u.a)(n),"changeCheckBox",(function(e){n.setState({checked:e}),n.Model.requireAllAction({required:e,value:n.props.schema})})),n.alterMsg=function(e,t){var a;return function(){clearTimeout(a),a=setTimeout(e,t)}}(n.alterMsg,2e3);var i,c=e.customWidgets;return(i=c)&&Array.isArray(i)&&(oe=se.concat(i)),n.state={visible:!1,show:!0,editVisible:!1,description:"",descriptionKey:null,advVisible:!1,itemKey:[],curItemCustomValue:null,checked:!1,editorModalName:"",mock:"",previewVisible:!1,importUiSchemaVisible:!1,uiItemKey:[]},n.Model=n.props.Model.schema,n.UiModel=n.props.Model.uiSchema,n.jsonSchemaData=null,n.jsonUiSchemaData=null,n.jsonData=null,n.columnWidths=n.getColumnWidths(),n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){if("function"===typeof this.props.onChange&&(this.props.schema!==e.schema||this.props.uiSchema!==e.uiSchema)){var t=JSON.stringify(this.props.schema||""),a=JSON.stringify(e.schema||""),n=JSON.stringify(this.props.uiSchema||""),i=JSON.stringify(e.uiSchema||"");if(t!==a||n!==i)return this.props.onChange(a,i)}this.props.data&&this.props.data!==e.data&&this.Model.changeEditorSchemaAction({value:JSON.parse(e.data)}),this.props.uiData&&this.props.uiData!==e.uiData&&this.UiModel.changeEditorUiSchemaAction({value:JSON.parse(e.uiData),isInit:!0})}},{key:"componentWillMount",value:function(){var e=this.props.data;e||(e='{\n        "type": "object",\n        "title": "",\n        "properties":{}\n      }'),this.Model.changeEditorSchemaAction({value:JSON.parse(e)});var t=this.props.uiData;t||(t="{}"),this.UiModel.changeEditorUiSchemaAction({value:JSON.parse(t),isInit:!0})}},{key:"getChildContext",value:function(){var e=this;return{getOpenValue:function(t){return ee(e.props.open,t)},changeCustomValue:this.changeCustomValue,Model:this.props.Model,UiModel:this.props.UiModel,isMock:this.props.isMock,showGroup:this.props.showGroup,showUiSelect:this.props.showUiSelect,columnWidths:this.columnWidths}}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.editVisible,i=t.advVisible,c=t.checked,s=t.editorModalName,o=t.previewVisible,r=t.importUiSchemaVisible,l=this.props,u=l.schema,d=l.uiSchema,h=l.widgets,p="object"!==this.props.schema.type&&"array"!==this.props.schema.type;return Object(K.jsxs)("div",{className:"json-schema-react-editor",children:[!this.props.hideImportBtn&&Object(K.jsx)(S.a,{className:"import-json-button",type:"primary",onClick:this.showModal,children:fe("import_json")}),this.props.showImportSchemaBtn&&Object(K.jsx)(S.a,{className:"import-json-button",type:"primary",onClick:this.showUiModal,children:fe("import")}),this.props.showPreviewBtn&&Object(K.jsx)(S.a,{className:"import-json-button",type:"primary",onClick:this.showPreviewModal,children:fe("preview")}),Object(K.jsx)(N.a,{maskClosable:!1,visible:a,title:fe("import_json"),onOk:this.handleOk,onCancel:this.handleCancel,className:"json-schema-react-editor-import-modal",okText:"ok",cancelText:fe("cancel"),footer:[Object(K.jsx)(S.a,{onClick:this.handleCancel,children:fe("cancel")},"back"),Object(K.jsx)(S.a,{type:"primary",onClick:this.handleOk,children:fe("ok")},"submit")],children:Object(K.jsxs)(C.a,{defaultActiveKey:"json",onChange:function(t){e.importJsonType=t},children:[Object(K.jsx)(et,{tab:"JSON",children:Object(K.jsx)(T,{data:"",mode:"json",onChange:this.handleImportJson})},"json"),Object(K.jsx)(et,{tab:"JSON-SCHEMA",children:Object(K.jsx)(T,{data:"",mode:"json",onChange:this.handleImportJsonSchema})},"schema")]})}),Object(K.jsx)(N.a,{maskClosable:!1,visible:r,title:fe("import_json_schema"),onOk:this.handleOk,onCancel:this.cancelUiModal,className:"json-schema-react-editor-import-modal",okText:"ok",cancelText:fe("cancel"),footer:[Object(K.jsx)(S.a,{onClick:this.cancelUiModal,children:fe("cancel")},"back"),Object(K.jsx)(S.a,{type:"primary",onClick:this.handleUiSchemaOk,children:fe("ok")},"submit")],children:Object(K.jsx)(T,{data:"",mode:"json",onChange:this.handleImportUiSchema})}),Object(K.jsx)(N.a,{title:Object(K.jsxs)("div",{children:[fe(s),"\xa0","mock"===s&&Object(K.jsx)(M.a,{title:fe("mockLink"),children:Object(K.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/YMFE/json-schema-editor-visual/issues/38",children:Object(K.jsx)(b.a,{})})})]}),maskClosable:!1,visible:n,onOk:function(){return e.handleEditOk(s)},onCancel:this.handleEditCancel,okText:fe("ok"),cancelText:fe("cancel"),children:Object(K.jsx)(Ze,{value:this.state[s],placeholder:fe(s),onChange:function(t){return e.changeDesc(t.target.value,s)},autosize:{minRows:6,maxRows:10}})}),Object(K.jsx)(N.a,{maskClosable:!1,visible:o,title:fe("preview"),onOk:this.handleOk,onCancel:this.cancelPreviewModal,className:"json-schema-react-editor-import-modal",okText:"ok",cancelText:fe("cancel"),footer:[Object(K.jsx)(S.a,{onClick:this.cancelPreviewModal,children:fe("cancel")},"back"),Object(K.jsx)(S.a,{type:"primary",onClick:this.cancelPreviewModal,children:fe("ok")},"submit")],children:Object(K.jsx)($e,{schema:u,uiSchema:d,widgets:h})}),i&&Object(K.jsx)(N.a,{title:fe("adv_setting"),maskClosable:!1,visible:i,onOk:this.handleAdvOk,onCancel:this.handleAdvCancel,okText:fe("ok"),width:780,cancelText:fe("cancel"),className:"json-schema-react-editor-adv-modal",children:Object(K.jsx)(Re,{data:JSON.stringify(this.state.curItemCustomValue,null,2)})}),this.props.showHeader&&Object(K.jsxs)(A.a,{children:[this.props.showEditor&&Object(K.jsx)(V.a,{span:6,className:"wrapper object-style",children:Object(K.jsx)(A.a,{type:"flex",align:"middle",style:{background:"rgba(0,0,0,.02)"},className:"root-header-wrapper",children:"JSON Schema"})}),Object(K.jsx)(V.a,{span:this.props.showEditor?18:24,className:"wrapper object-style",children:Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",style:{background:"rgba(0,0,0,.02)",flexWrap:"nowrap"},className:"root-header-wrapper",children:[Object(K.jsx)(V.a,{span:this.columnWidths.name,className:"col-item name-item col-item-name",children:Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",style:{flexWrap:"nowrap"},children:[Object(K.jsx)(V.a,{span:2,className:"down-style-col"}),Object(K.jsx)(V.a,{span:20,children:"\u540d\u79f0"}),Object(K.jsx)(V.a,{className:"textAlignLeft",span:2,style:{minWidth:35},children:"\u5fc5\u987b"})]})}),Object(K.jsx)(V.a,{span:this.columnWidths.type,style:{display:"flex",justifyContent:"center"},className:"textAlignLeft",children:Object(K.jsx)("span",{style:{width:"90%"},children:"\u7c7b\u578b"})}),this.props.isMock&&Object(K.jsx)(V.a,{span:this.columnWidths.mock,className:"textAlignLeft",children:"mock"}),Object(K.jsx)(V.a,{span:this.columnWidths.title,className:"textAlignLeft",children:"\u6807\u9898"}),Object(K.jsx)(V.a,{span:this.columnWidths.desc,className:"textAlignLeft",children:"\u63cf\u8ff0"}),this.props.showGroup&&Object(K.jsx)(V.a,{span:this.columnWidths.group,className:"textAlignLeft group-header",children:"\u5206\u7ec4"}),this.props.showUiSelect&&Object(K.jsx)(V.a,{span:this.columnWidths.ui,className:"textAlignLeft ui-display-header",children:"\u5c55\u793a"}),Object(K.jsxs)(V.a,{span:2,className:"textAlignLeft",children:["\u8bbe\u7f6e",this.props.hideRoot&&"object"===u.type&&Object(K.jsx)("span",{onClick:function(){return e.addChildField("properties")},style:{marginLeft:20},children:Object(K.jsx)(M.a,{placement:"top",title:fe("add_child_node"),children:Object(K.jsx)(O.a,{className:"plus"})})})]})]})})]}),Object(K.jsxs)(A.a,{children:[this.props.showEditor&&Object(K.jsx)(V.a,{span:6,children:Object(K.jsx)(T,{className:"pretty-editor",mode:"json",data:JSON.stringify(u,null,2),onChange:this.handleParams})}),Object(K.jsxs)(V.a,{span:this.props.showEditor?18:24,className:"wrapper object-style",style:{marginTop:this.props.showHeader?0:8},children:[!this.props.hideRoot&&Object(K.jsxs)(A.a,{type:"flex",align:"middle",justify:"space-around",children:[Object(K.jsx)(V.a,{span:this.columnWidths.name,className:"col-item name-item col-item-name",children:Object(K.jsxs)(A.a,{type:"flex",justify:"space-around",align:"middle",children:[Object(K.jsx)(V.a,{span:2,className:"down-style-col",children:"object"===u.type?Object(K.jsx)("span",{className:"down-style",onClick:this.clickIcon,children:this.state.show?Object(K.jsx)(x.a,{className:"icon-object"}):Object(K.jsx)(f.a,{className:"icon-object"})}):null}),Object(K.jsx)(V.a,{span:22,children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(M.a,{placement:"top",title:"checked_all",children:Object(K.jsx)(_.a,{checked:c,disabled:p,onChange:function(t){return e.changeCheckBox(t.target.checked)}})}),disabled:!0,value:"root"})})]})}),Object(K.jsx)(V.a,{span:this.columnWidths.type,className:"col-item col-item-type",children:Object(K.jsx)(v.a,{className:"type-select-style",onChange:function(t){return e.changeType("type",t)},value:u.type,children:X.map((function(e,t){return Object(K.jsx)(Xe,{value:e,children:e},t)}))})}),this.props.isMock&&Object(K.jsx)(V.a,{span:this.columnWidths.mock,className:"col-item col-item-mock",children:Object(K.jsx)(ve,{schema:u,showEdit:function(){return e.showEdit([],"mock",u.mock,u.type)},onChange:function(t){return e.changeValue(["mock"],t)}})}),Object(K.jsx)(V.a,{span:this.columnWidths.title,className:"col-item col-item-mock",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.showEdit([],"title",u.title)}}),placeholder:fe("title"),value:u.title,onChange:function(t){return e.changeValue(["title"],t.target.value)}})}),Object(K.jsx)(V.a,{span:this.columnWidths.desc,className:"col-item col-item-desc",children:Object(K.jsx)(k.a,{addonAfter:Object(K.jsx)(g.a,{onClick:function(){return e.showEdit([],"description",e.props.schema.description)}}),placeholder:fe("description"),value:u.description,onChange:function(t){return e.changeValue(["description"],t.target.value)}})}),this.props.showGroup&&Object(K.jsx)(V.a,{span:this.columnWidths.group,className:"col-item col-item-group",children:Object(K.jsx)(k.a,{placeholder:fe("group"),value:u.group,onChange:function(t){return e.changeValue(["group"],t.target.value)}})}),this.props.showUiSelect&&Object(K.jsx)(V.a,{span:this.columnWidths.ui,className:"col-item col-item-ui",children:Object(K.jsx)(v.a,{className:"type-select-style",onChange:function(t){return e.changeUiWidget(null,t)},value:d.uiKey,disabled:"object"===u.type,children:re(u.type).map((function(e,t){return Object(K.jsx)(Xe,{value:e.uiKey,children:e.label},t)}))})}),Object(K.jsxs)(V.a,{span:2,className:"col-item col-item-setting",children:[Object(K.jsx)("span",{className:"adv-set",onClick:function(){e.showAdv([],e.props.schema),e.setCurUiItem([],e.props.uiSchema)},children:Object(K.jsx)(M.a,{placement:"top",title:fe("adv_setting"),children:Object(K.jsx)(y.a,{})})}),"object"===u.type?Object(K.jsx)("span",{onClick:function(){return e.addChildField("properties")},children:Object(K.jsx)(M.a,{placement:"top",title:fe("add_child_node"),children:Object(K.jsx)(O.a,{className:"plus"})})}):null]})]}),this.state.show&&Object(K.jsx)(Ve,{data:u,uiSchema:d,showEdit:this.showEdit,showAdv:this.showAdv})]})]})]})}}]),a}(i.a.Component);tt.childContextTypes={getOpenValue:G.a.func,changeCustomValue:G.a.func,Model:G.a.object,UiModel:G.a.object,isMock:G.a.bool,showGroup:G.a.bool,showUiSelect:G.a.bool,columnWidths:G.a.object};var at,nt,it=Object(o.b)((function(e){return{schema:e.schema.data,uiSchema:e.uiSchema.data,open:e.schema.open}}))(tt),ct=a(306),st=a.n(ct),ot=function(){var e=new Map;return{getCache:function(t){return e[t]},setCache:function(t,a){return e[t]=a,this},removeCache:function(t){return delete e[t],this}}}(),rt=a(26),lt=1,ut={state:{message:null,data:{title:"",type:"object",properties:{},required:[]},open:{properties:!0}},changeEditorSchemaAction:function(e,t){Ee(t.value),e.data=t.value},changeNameAction:function(e,t,a){var n=t.prefix,i=t.name,c=t.value,s=a.data,o=ne(n),r=ee(s,o),l=[].concat(r.required||[]),u=ee(s,n),d={},h=u[i],p=[].concat(n,c,"properties").join($),j=[].concat(n,i,"properties").join($);if(h.properties&&(delete e.open[j],e.open[p]=!0),!u[c]||"object"!==Object(U.a)(u[c])){for(var m in l=l.map((function(e){return e===i?c:e})),o.push("required"),te(e.data,o,l),u)m===i?d[c]=u[m]:d[m]=u[m];te(e.data,n,d)}},changeValueAction:function(e,t){var a=t.key;t.value?te(e.data,a,t.value):ae(e.data,a)},changeTypeAction:function(e,t,a){var n=t.key,i=t.value,c=ne(n),s=ee(a.data,c);if(s.type!==i){var o=Z[i],r=s.description?{description:s.description}:{},l=Object.assign({},o,r);te(e,[].concat("data",c),l)}},enableRequireAction:function(e,t,a){var n=ne(t.prefix),i=ee(a.data,n),c=[].concat(i.required||[]),s=c.indexOf(t.name);!t.required&&s>=0?(c.splice(s,1),n.push("required"),0===c.length?ae(e.data,n):te(e.data,n,c)):t.required&&-1===s&&(c.push(t.name),n.push("required"),te(e.data,n,c))},requireAllAction:function(e,t,a){var n=ce(t.value);ie(n,t.required),e.data=n},deleteItemAction:function(e,t,a){var n=t.key,i=n[n.length-1],c=a.data,s=ne(n),o=ee(c,s),r={};for(var l in o)l!==i&&(r[l]=o[l]);te(e.data,s,r)},addFieldAction:function(e,t,a){var n=t.prefix,i=a.data,c=t.name,s=ee(i,n),o={},r=ne(n),l=ee(i,r),u=[].concat(l.required||[]),d="";if(c)for(var h in s)o[h]=s[h],h===c&&(o[d="field_"+lt++]=Z.string,u.push(d));else(o=Object.assign({},s))[d="field_"+lt++]=Z.string,u.push(d);ot.setCache("newNodeName",d),te(e.data,n,o),r.push("required"),te(e.data,r,u)},addChildFieldAction:function(e,t,a){var n=t.key,i=a.data,c=ee(i,n),s={};s=Object.assign({},c);var o="field_"+lt++;s[o]=Z.string,ot.setCache("newNodeName",o),te(e.data,n,s);var r=ne(n),l=ee(i,r),u=[].concat(l.required||[]);u.push(o),r.push("required"),te(e.data,r,u)},setOpenValueAction:function(e,t,a){var n,i=t.key.join($);n=rt.isUndefined(t.value)?!ee(a.open,[i]):t.value,te(e.open,[i],n)}},dt={state:{message:null,data:{}},changeEditorUiSchemaAction:function(e,t){var a=t.value;if(t.isInit)e.data=a;else if("string"===m.a.get(a,"type")){var n=le("string",m.a.get(a,"format")),i={type:"string",uiKey:n.uiKey,format:n.uiFormat};e.data=i}},changeUiValueAction:function(e,t){var a=t.key;t.value?de(e.data,a,t.value):e.data},changeUiAction:function(e,t){var a=t.prefix,n=t.uiKey,i=t.value,c=t.type,s=a.map((function(e){return e.key})),o={type:c,uiKey:n};switch(i){case"textarea":case"date":case"image":o.format=i;break;case"range":o.type=i,o.format="dateTime";break;case"number":o.type=i;break;case"object":case"input":break;case"array":o.items={type:"string",uiKey:"string-input"};break;default:o["ui:widget"]=i}var r=o;de(e.data,s,r)},deleteItemUiAction:function(e,t,a){var n=t.prefix.map((function(e){return e.key})),i=n[n.length-1],c=ne(n),s=ee(a.data,c),o={};for(var r in s)r!==i&&(o[r]=s[r]);de(e.data,c,o,!0)},addFieldUiAction:function(e,t){var a=ot.getCache("newNodeName"),n=ce(t.uiPrefixMap);n.push({key:a,type:"string"});var i=n.map((function(e){return e.key}));de(e.data,i,{type:"string",uiKey:"string-input"})},addChildFieldUiAction:function(e,t){var a=ot.getCache("newNodeName"),n=ce(t.uiPrefixMap);n.push({key:a,type:"string"});var i=n.map((function(e){return e.key}));de(e.data,i,{type:"string",uiKey:"string-input"})}},ht=a(308),pt=a.n(ht),jt=a(309),mt=a.n(jt),bt=v.a.Option;function Ot(e,t){at&&(clearTimeout(at),at=null),nt=e,at=setTimeout((function(){var a=mt.a.encode({code:"utf-8",q:e});pt()("https://suggest.taobao.com/sug?".concat(a)).then((function(e){return e.json()})).then((function(a){if(nt===e){var n=a.result,i=[];n.forEach((function(e){i.push({value:e[0],text:e[0]})})),t(i)}}))}),300)}var xt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(p.a)(Object(u.a)(e),"state",{data:[]}),Object(p.a)(Object(u.a)(e),"handleSearch",(function(t){t?Ot(t,(function(t){return e.setState({data:t})})):e.setState({data:[]})})),Object(p.a)(Object(u.a)(e),"handleChange",(function(t){var a=e.props;(0,a.onChange)(a.name,t)})),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.options,n=this.state.data.map((function(e){return Object(K.jsx)(bt,{children:e.text},e.value)}));return Object(K.jsx)(v.a,Object(s.a)(Object(s.a)({},a),{},{style:{width:"100%"},showSearch:!0,value:t||void 0,defaultActiveFirstOption:!1,filterOption:!1,onSearch:this.handleSearch,onChange:this.handleChange,notFoundContent:null,children:n}))}}]),a}(i.a.Component),ft=[{label:"\u81ea\u5b9a\u4e49\u641c\u7d22\u6846",value:"SearchInput",uiKey:"string-searchInput",type:["string","boolean"]}],gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.lang&&H(e.lang);var t=st()({schema:ut,uiSchema:dt});e.format?t.__jsonSchemaFormat=e.format:t.__jsonSchemaFormat=Q,e.mock&&(t.__jsonSchemaMock=e.mock);var a=t.getStore(),n=function(e){return Object(K.jsx)(o.a,{store:a,className:"wrapper",children:Object(K.jsx)(it,Object(s.a)({Model:t},e))})};return n}({mock:[{name:"\u5b57\u7b26\u4e32",mock:"@string"},{name:"\u81ea\u7136\u6570",mock:"@natural"},{name:"\u6d6e\u70b9\u6570",mock:"@float"},{name:"\u5b57\u7b26",mock:"@character"},{name:"\u5e03\u5c14",mock:"@boolean"},{name:"url",mock:"@url"},{name:"\u57df\u540d",mock:"@domain"},{name:"ip\u5730\u5740",mock:"@ip"},{name:"id",mock:"@id"},{name:"guid",mock:"@guid"},{name:"\u5f53\u524d\u65f6\u95f4",mock:"@now"},{name:"\u65f6\u95f4\u6233",mock:"@timestamp"}],customWidgets:ft});Object(c.render)(Object(K.jsxs)("div",{children:[Object(K.jsx)("a",{target:"_blank",href:"https://github.com/YMFE/json-schema-editor-visual",rel:"noreferrer",children:Object(K.jsx)("h1",{children:"JSON-Schema-Editor"})}),Object(K.jsxs)("p",{style:{fontSize:"16px"},children:["A json-schema editor of high efficient and easy-to-use, base on React."," ",Object(K.jsx)("a",{target:"_blank",href:"https://github.com/YMFE/json-schema-editor-visual",rel:"noreferrer",children:"Github"})]}),Object(K.jsx)("br",{}),Object(K.jsxs)("h3",{children:["\u8be5\u5de5\u5177\u5df2\u88ab\u7528\u4e8e\u5f00\u6e90\u63a5\u53e3\u7ba1\u7406\u5e73\u53f0\uff1a"," ",Object(K.jsx)("a",{target:"_blank",href:"https://github.com/ymfe/yapi",rel:"noreferrer",children:"YApi"})]}),Object(K.jsx)("br",{}),Object(K.jsx)("h2",{children:"Example:"}),Object(K.jsx)("hr",{}),Object(K.jsx)(gt,{showEditor:!1,isMock:!1,showHeader:!0,hideRoot:!0,hideImportBtn:!0,showPreviewBtn:!0,showUiSelect:!1,options:{lang:"zh_CN"},data:'{"type":"object","title":"","properties":{"dataSource":{"type":"object","properties":{},"title":"\u6570\u636e\u6e90"}},"required":["dataSource"]}',uiData:'{"dataSource":{"type":"object","uiKey":"string-dataSourceSelect","ui:widget":"DataSourceSelect"}}',customWidgets:ft,widgets:{SearchInput:xt},onChange:function(e,t){!function(e,t){var a=pe(Y(e)?JSON.parse(e):e,Y(t)?JSON.parse(t):t);console.log(a)}(e,t)}})]}),document.getElementById("root"))}},[[627,1,2]]]);
//# sourceMappingURL=main.5053ef35.chunk.js.map